version: 2

models:      
  - name: product_detail
    columns:
      - name: sku
        tests:
          - unique
          - not_null

  - name: address_details
    columns:
      - name: ship_postal
        tests:
          - not_null
        
  - name: date_breakup
    columns:
      - name: order_date
        tests:
          - unique
          - not_null

  - name: shipping_details
    columns:
      - name: order_id
        tests:
          - not_null

  - name: fact_table
    columns:
      - name: order_id
        tests:
          - not_null
          - relationships:
              to: ref("shipping_details")
              field : order_id
      - name: sku
        tests:
          - not_null
          - relationships:
              to: ref("product_details")
              field : sku
      - name: ship_postal
        tests:
          - not_null
          - relationships:
              to: ref("address_details")
              field : ship_postal
      - name: order_date
        tests:
          - not_null
          - relationships:
              to: ref("date_breakup")
              field : order_date
      - name: ASIN
        tests:
          - not_null
      - name: quantity_sold
        tests:
          - not_null
      - name: revenue
        tests:
          - not_null
      - name: order_status
        tests:
          - not_null
          - accepted_values:
              values: ['Cancelled','Shipped - Delivered to Buyer','Shipped','Shipped - Returned to Seller','Shipped - Rejected by Buyer','Shipped - Lost in Transit','Shipped - Out for Delivery','Shipped - Returning to Seller','Shipped - Picked Up','Pending','Pending - Waiting for Pick Up','Shipped - Damaged','Shipping']
      - name: courier_status
        tests:
          - not_null
          - accepted_values:
              values: ['Cancelled', 'Shipped', 'Unshipped', 'UNKNOWN']